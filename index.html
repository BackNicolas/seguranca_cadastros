<!DOCTYPE html>
<html lang="pt-br">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão de Segurança</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="style.css">
        <link rel="script" href="script.js">
</head>

<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Sistema de Gestão de Segurança</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#cadastros">Cadastros</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="formularios.html">Relatórios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="outros.html">Outros</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <h1>Sistema de Gestão de Segurança</h1>

        <section id="cadastros">
            <h2>Cadastros</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Cadastro de Funcionários da Segurança</h4>
                        </div>
                        <div class="card-body">
                            <form id="cadastroFuncionarioForm">
                                <div class="form-group">
                                    <label for="nomeFuncionario">Nome:</label>
                                    <input type="text" class="form-control" id="nomeFuncionario" name="nomeFuncionario"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="cpfFuncionario">CPF:</label>
                                    <input type="text" class="form-control" id="cpfFuncionario" name="cpfFuncionario"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="matriculaFuncionario">Matrícula:</label>
                                    <input type="text" class="form-control" id="matriculaFuncionario"
                                        name="matriculaFuncionario" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                                <button type="reset" class="btn btn-secondary">Limpar</button>
                            </form>
                            <div id="mensagemCadastroFuncionario" class="mt-3"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Cadastro de Equipamentos de Segurança</h4>
                        </div>
                        <div class="card-body">
                            <form id="cadastroEquipamentoForm">
                                <div class="form-group">
                                    <label for="nomeEquipamento">Nome do Equipamento:</label>
                                    <input type="text" class="form-control" id="nomeEquipamento" name="nomeEquipamento"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="tipoEquipamento">Tipo de Equipamento:</label>
                                    <select class="form-control" id="tipoEquipamento" name="tipoEquipamento">
                                        <option value="camera">Câmera</option>
                                        <option value="alarme">Alarme</option>
                                        <option value="sensor">Sensor</option>
                                        <option value="outro">Outro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="localEquipamento">Local:</label>
                                    <input type="text" class="form-control" id="localEquipamento"
                                        name="localEquipamento" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                                <button type="reset" class="btn btn-secondary">Limpar</button>
                            </form>
                            <div id="mensagemCadastroEquipamento" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Cadastro de Áreas de Acesso Restrito</h4>
                        </div>
                        <div class="card-body">
                            <form id="cadastroAreaRestritaForm">
                                <div class="form-group">
                                    <label for="nomeAreaRestrita">Nome da Área:</label>
                                    <input type="text" class="form-control" id="nomeAreaRestrita"
                                        name="nomeAreaRestrita" required>
                                </div>
                                <div class="form-group">
                                    <label for="descricaoAreaRestrita">Descrição:</label>
                                    <input type="text" class="form-control" id="descricaoAreaRestrita"
                                        name="descricaoAreaRestrita" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                                <button type="reset" class="btn btn-secondary">Limpar</button>
                            </form>
                            <div id="mensagemCadastroAreaRestrita" class="mt-3"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Cadastro de Ocorrências de Segurança</h4>
                        </div>
                        <div class="card-body">
                            <form id="cadastroOcorrenciaForm" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label for="tipoOcorrencia">Tipo de Ocorrência:</label>
                                    <select class="form-control" id="tipoOcorrencia" name="tipoOcorrencia">
                                        <option value="furto">Furto</option>
                                        <option value="roubo">Roubo</option>
                                        <option value="invasao">Invasão</option>
                                        <option value="vandalismo">Vandalismo</option>
                                        <option value="acidente">Acidente</option>
                                        <option value="outro">Outro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="localOcorrencia">Local da Ocorrência:</label>
                                    <input type="text" class="form-control" id="localOcorrencia" name="localOcorrencia"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="dataOcorrencia">Data e Hora:</label>
                                    <input type="datetime-local" class="form-control" id="dataOcorrencia"
                                        name="dataOcorrencia" required>
                                </div>
                                <div class="form-group">
                                    <label for="descricaoOcorrencia">Descrição:</label>
                                    <textarea class="form-control" id="descricaoOcorrencia" name="descricaoOcorrencia"
                                        rows="3" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="imagemOcorrencia">Imagem da Ocorrência (Opcional):</label>
                                    <input type="file" class="form-control" id="imagemOcorrencia"
                                        name="imagemOcorrencia" accept="image/*">
                                </div>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                                <button type="reset" class="btn btn-secondary">Limpar</button>
                            </form>
                            <div id="mensagemCadastroOcorrencia" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Cadastro de Visitantes (Quando Aplicável)</h4>
                        </div>
                        <div class="card-body">
                            <form id="cadastroVisitanteForm">
                                <div class="form-group">
                                    <label for="nomeVisitante">Nome do Visitante:</label>
                                    <input type="text" class="form-control" id="nomeVisitante" name="nomeVisitante"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="documentoVisitante">Documento:</label>
                                    <input type="text" class="form-control" id="documentoVisitante"
                                        name="documentoVisitante" required>
                                </div>
                                <div class="form-group">
                                    <label for="empresaVisitante">Empresa:</label>
                                    <input type="text" class="form-control" id="empresaVisitante"
                                        name="empresaVisitante">
                                </div>
                                <div class="form-group">
                                    <label for="motivoVisita">Motivo da Visita:</label>
                                    <input type="text" class="form-control" id="motivoVisita" name="motivoVisita"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="dataHoraVisita">Data e Hora da Visita:</label>
                                    <input type="datetime-local" class="form-control" id="dataHoraVisita"
                                        name="dataHoraVisita" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Cadastrar</button>
                                <button type="reset" class="btn btn-secondary">Limpar</button>
                            </form>
                            <div id="mensagemCadastroVisitante" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1nqEdzt93i+j6iY5g+c40vknig0"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/pt-br.js"></script>
    <script>
        moment.locale('pt-br');

        // --- Funções Auxiliares ---
        /**
         * Exibe uma mensagem de feedback para o usuário.
         * @param {string} mensagem - A mensagem a ser exibida.
         * @param {string} tipo - O tipo de mensagem ('sucesso', 'erro', 'alerta').
         * @param {string} idElemento - O ID do elemento onde a mensagem será exibida.
         */
        function exibirMensagem(mensagem, tipo, idElemento) {
            const elemento = document.getElementById(idElemento);
            elemento.innerHTML = ''; // Limpa mensagens anteriores
            const div = document.createElement('div');
            div.className = `alert alert-${tipo}`;
            div.textContent = mensagem;
            elemento.appendChild(div);
        }

        /**
         * Formata a data para o padrão brasileiro.
         * @param {string} data - A data no formato ISO (ex: 2023-10-26T10:00:00).
         * @returns {string} A data formatada no padrão brasileiro (ex: 26/10/2023 10:00:00).
         */
        function formatarData(data) {
            return moment(data).format('DD/MM/YYYY HH:mm:ss');
        }

        /**
         * Obtém os dados de um formulário.
         * @param {string} formId - O ID do formulário.
         * @returns {object} Um objeto contendo os dados do formulário.
         */
        function obterDadosFormulario(formId) {
            const form = document.getElementById(formId);
            const formData = new FormData(form);
            const dados = {};
            
            for (let [nome, valor] of formData.entries()) {
                if (nome === 'imagemOcorrencia') {
                    dados[nome] = formData.get(nome); // Obtém o arquivo
                } else {
                    dados[nome] = valor;
                }
            }
            return dados;

            for (let index = 0; index < array.length; index++) {
                const element = array[index];
                
            }
        }

        // --- Funções de Cadastro ---

        document.getElementById('cadastroFuncionarioForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('cadastroFuncionarioForm');

            // Simulação de cadastro (substitua por lógica real)
            console.log('Dados do Funcionário:', dados);
            exibirMensagem('Funcionário cadastrado com sucesso!', 'sucesso', 'mensagemCadastroFuncionario');
            this.reset(); // Limpa o formulário
        });

        document.getElementById('cadastroEquipamentoForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('cadastroEquipamentoForm');

            // Simulação de cadastro
            console.log('Dados do Equipamento:', dados);
            exibirMensagem('Equipamento cadastrado com sucesso!', 'sucesso', 'mensagemCadastroEquipamento');
            this.reset();
        });

        document.getElementById('cadastroAreaRestritaForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('cadastroAreaRestritaForm');

            // Simulação de cadastro
            console.log('Dados da Área Restrita:', dados);
            exibirMensagem('Área Restrita cadastrada com sucesso!', 'sucesso', 'mensagemCadastroAreaRestrita');
            this.reset();
            // Atualiza o select de áreas restritas nos relatórios e controle de acesso
            atualizarSelectAreasRestritas();
        });

        document.getElementById('cadastroOcorrenciaForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('cadastroOcorrenciaForm');

            // Verifica se um arquivo de imagem foi selecionado
            const imagemOcorrencia = dados.imagemOcorrencia;
            if (imagemOcorrencia && imagemOcorrencia.size > 0) {
                // Se houver imagem, converte para base64 (para exibição no relatório)
                const reader = new FileReader();
                reader.onload = function (e) {
                    dados.imagemBase64 = e.target.result; // Adiciona a imagem em base64 aos dados
                    // Simulação de cadastro
                    console.log('Dados da Ocorrência:', dados);
                    exibirMensagem('Ocorrência cadastrada com sucesso!', 'sucesso', 'mensagemCadastroOcorrencia');
                    document.getElementById('cadastroOcorrenciaForm').reset();
                };
                reader.readAsDataURL(imagemOcorrencia); // Lê o arquivo como base64
            } else {
                // Se não houver imagem, continua com o cadastro normalmente
                // Simulação de cadastro
                console.log('Dados da Ocorrência:', dados);
                exibirMensagem('Ocorrência cadastrada com sucesso!', 'sucesso', 'mensagemCadastroOcorrencia');
                this.reset();
            }
        });

        document.getElementById('cadastroVisitanteForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('cadastroVisitanteForm');

            // Simulação de cadastro
            console.log('Dados do Visitante:', dados);
            exibirMensagem('Visitante cadastrado com sucesso!', 'sucesso', 'mensagemCadastroVisitante');
            this.reset();
        });

        // --- Funções de Relatório ---
        document.getElementById('relatorioOcorrenciaForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const filtros = obterDadosFormulario('relatorioOcorrenciaForm');

            // Simulação de geração de relatório (substitua por lógica real)
            console.log('Filtros do Relatório de Ocorrências:', filtros);

            // Dados de exemplo de ocorrências (substitua por dados reais)
            const ocorrencias = [
                { tipo: 'Furto', local: 'Almoxarifado', dataHora: '2023-10-25T10:00:00', descricao: 'Furto de ferramentas.', imagemBase64: '' },
                { tipo: 'Roubo', local: 'Portaria', dataHora: '2023-10-25T14:30:00', descricao: 'Roubo de veículo.', imagemBase64: '' },
                { tipo: 'Invasao', local: 'Entrada Principal', dataHora: '2023-10-26T09:00:00', descricao: 'Invasão de área restrita.', imagemBase64: '' },
                { tipo: 'Vandalismo', local: 'Refeitório', dataHora: '2023-10-26T11:00:00', descricao: 'Danos à propriedade.', imagemBase64: '' },
                { tipo: 'Acidente', local: 'Estacionamento', dataHora: '2023-10-27T16:00:00', descricao: 'Colisão de veículos.', imagemBase64: '' },
                { tipo: 'Outro', local: 'Corredor', dataHora: '2023-10-28T18:00:00', descricao: 'Ocorrência teste.', imagemBase64: '' },
            ];

            let ocorrenciasFiltradas = ocorrencias.filter(ocorrencia => {
                let filtroTipo = !filtros.tipoOcorrenciaRelatorio || ocorrencia.tipo === filtros.tipoOcorrenciaRelatorio;
                let filtroLocal = !filtros.localOcorrenciaRelatorio || ocorrencia.local.toLowerCase().includes(filtros.localOcorrenciaRelatorio.toLowerCase());
                let filtroDataInicio = !filtros.dataInicioOcorrenciaRelatorio || moment(ocorrencia.dataHora).isSameOrAfter(filtros.dataInicioOcorrenciaRelatorio, 'day');
                let filtroDataFim = !filtros.dataFimOcorrenciaRelatorio || moment(ocorrencia.dataHora).isSameOrBefore(filtros.dataFimOcorrenciaRelatorio, 'day');
                return filtroTipo && filtroLocal && filtroDataInicio && filtroDataFim;
            });

            const corpoRelatorio = document.getElementById('corpoRelatorioOcorrencia');
            corpoRelatorio.innerHTML = ''; // Limpa o corpo da tabela

            if (ocorrenciasFiltradas.length === 0) {
                exibirMensagem('Nenhuma ocorrência encontrada para os filtros informados.', 'alerta', 'mensagemRelatorioOcorrencia');
                document.getElementById('relatorioOcorrenciaContainer').style.display = 'none';
            } else {
                ocorrenciasFiltradas.forEach(ocorrencia => {
                    const row = document.createElement('tr');
                    const tipoCell = document.createElement('td');
                    const localCell = document.createElement('td');
                    const dataHoraCell = document.createElement('td');
                    const descricaoCell = document.createElement('td');

                    tipoCell.textContent = ocorrencia.tipo;
                    localCell.textContent = ocorrencia.local;
                    dataHoraCell.textContent = formatarData(ocorrencia.dataHora);
                    descricaoCell.textContent = ocorrencia.descricao;

                    row.appendChild(tipoCell);
                    row.appendChild(localCell);
                    row.appendChild(dataHoraCell);
                    row.appendChild(descricaoCell);
                    corpoRelatorio.appendChild(row);

                    // Adiciona evento de clique para exibir detalhes no modal
                    row.addEventListener('click', () => {
                        exibirDetalhesOcorrencia(ocorrencia);
                    });
                });

                document.getElementById('mensagemRelatorioOcorrencia').innerHTML = ''; // Limpa qualquer mensagem anterior
                document.getElementById('relatorioOcorrenciaContainer').style.display = 'block'; // Exibe o relatório
            }
        });

        // Função para exibir detalhes da ocorrência em um modal
        function exibirDetalhesOcorrencia(ocorrencia) {
            const modalBody = document.getElementById('corpoModalOcorrencia');
            modalBody.innerHTML = ''; // Limpa o conteúdo anterior do modal

            const titulo = document.createElement('h4');
            titulo.textContent = `Ocorrência: ${ocorrencia.tipo}`;
            modalBody.appendChild(titulo);

            const dataHora = document.createElement('p');
            dataHora.textContent = `Data/Hora: ${formatarData(ocorrencia.dataHora)}`;
            modalBody.appendChild(dataHora);

            const local = document.createElement('p');
            local.textContent = `Local: ${ocorrencia.local}`;
            modalBody.appendChild(local);

            const descricao = document.createElement('p');
            descricao.textContent = `Descrição: ${ocorrencia.descricao}`;
            modalBody.appendChild(descricao);

            // Se houver imagem, exibe no modal
            if (ocorrencia.imagemBase64) {
                const imagem = document.createElement('img');
                imagem.src = ocorrencia.imagemBase64;
                imagem.style.width = '100%'; // Ajusta o tamanho da imagem
                imagem.style.borderRadius = '8px';
                imagem.style.marginTop = '10px';
                modalBody.appendChild(imagem);
            }

            // Exibe o modal
            const modalOcorrencia = new bootstrap.Modal(document.getElementById('modalOcorrencia'));
            modalOcorrencia.show();
        }

        function atualizarSelectAreasRestritas() {
            const areasRestritas = ['Almoxarifado', 'Portaria', 'Entrada Principal', 'Refeitório', 'Estacionamento', 'Corredor']; // Substitua por seus dados reais

            const selectAreaRestritaRelatorio = document.getElementById('areaRestritaRelatorio');
            selectAreaRestritaRelatorio.innerHTML = '<option value="">Todas</option>'; // Mantém a opção "Todas"

            const selectAreaRestritaAcesso = document.getElementById('areaRestritaAcesso');
            selectAreaRestritaAcesso.innerHTML = '<option value="">Selecione a Área Restrita</option>';

            areasRestritas.forEach(area => {
                const optionRelatorio = document.createElement('option');
                optionRelatorio.value = area;
                optionRelatorio.textContent = area;
                selectAreaRestritaRelatorio.appendChild(optionRelatorio);

                const optionAcesso = document.createElement('option');
                optionAcesso.value = area;
                optionAcesso.textContent = area;
                selectAreaRestritaAcesso.appendChild(optionAcesso);
            });
        }

        function atualizarSelectFuncionarios() {
            const funcionarios = [{ matricula: '123', nome: 'João' }, { matricula: '456', nome: 'Maria' }, { matricula: '789', nome: 'José' }]; // Substitua por seus dados reais

            const selectFuncionarioRelatorio = document.getElementById('funcionarioRelatorio');
            selectFuncionarioRelatorio.innerHTML = '<option value="">Todos</option>';

            const selectFuncionarioRondaRelatorio = document.getElementById('funcionarioRondaRelatorio');
            selectFuncionarioRondaRelatorio.innerHTML = '<option value="">Todos</option>';

            const selectFuncionarioAcesso = document.getElementById('funcionarioAcesso');
            selectFuncionarioAcesso.innerHTML = '<option value="">Selecione o Funcionário</option>';

            funcionarios.forEach(funcionario => {
                const optionRelatorio = document.createElement('option');
                optionRelatorio.value = funcionario.matricula;
                optionRelatorio.textContent = funcionario.nome;
                selectFuncionarioRelatorio.appendChild(optionRelatorio);

                const optionRondaRelatorio = document.createElement('option');
                optionRondaRelatorio.value = funcionario.matricula;
                optionRondaRelatorio.textContent = funcionario.nome;
                selectFuncionarioRondaRelatorio.appendChild(optionRondaRelatorio);

                const optionAcesso = document.createElement('option');
                optionAcesso.value = funcionario.matricula;
                optionAcesso.textContent = funcionario.nome;
                selectFuncionarioAcesso.appendChild(optionAcesso);
            });
        }

        function atualizarSelectEquipamentos() {
            const equipamentos = [{ nomeEquipamento: 'Câmera 01' }, { nomeEquipamento: 'Alarme Central' }, { nomeEquipamento: 'Sensor de Presença' }]; // Substitua por seus dados reais

            const selectEquipamentoManutencaoRelatorio = document.getElementById('equipamentoManutencaoRelatorio');
            selectEquipamentoManutencaoRelatorio.innerHTML = '<option value="">Todos</option>';

            equipamentos.forEach(equipamento => {
                const option = document.createElement('option');
                option.value = equipamento.nomeEquipamento;
                option.textContent = equipamento.nomeEquipamento;
                selectEquipamentoManutencaoRelatorio.appendChild(option);
            });
        }

        document.getElementById('relatorioAcessoRestritoForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const filtros = obterDadosFormulario('relatorioAcessoRestritoForm');

            // Simulação de geração de relatório
            console.log('Filtros do Relatório de Acesso:', filtros);

            // Dados de exemplo de acesso (substitua por dados reais)
            const acessos = [
                { funcionario: '123', nomeFuncionario: 'João', areaRestrita: 'Almoxarifado', dataHoraEntrada: '2023-10-25T09:00:00', dataHoraSaida: '2023-10-25T10:00:00' },
                { funcionario: '456', nomeFuncionario: 'Maria', areaRestrita: 'Portaria', dataHoraEntrada: '2023-10-25T13:00:00', dataHoraSaida: '2023-10-25T14:00:00' },
                { funcionario: '123', nomeFuncionario: 'João', areaRestrita: 'Almoxarifado', dataHoraEntrada: '2023-10-26T15:00:00', dataHoraSaida: '2023-10-26T16:00:00' },
            ];

            let acessosFiltrados = acessos.filter(acesso => {
                let filtroAreaRestrita = !filtros.areaRestritaRelatorio || acesso.areaRestrita === filtros.areaRestritaRelatorio;
                let filtroFuncionario = !filtros.funcionarioRelatorio || acesso.funcionario === filtros.funcionarioRelatorio;
                let filtroDataInicio = !filtros.dataInicioAcessoRelatorio || moment(acesso.dataHoraEntrada).isSameOrAfter(filtros.dataInicioAcessoRelatorio, 'day');
                let filtroDataFim = !filtros.dataFimAcessoRelatorio || moment(acesso.dataHoraEntrada).isSameOrBefore(filtros.dataFimAcessoRelatorio, 'day');
                return filtroAreaRestrita && filtroFuncionario && filtroDataInicio && filtroDataFim;
            });

            const corpoRelatorio = document.getElementById('corpoRelatorioAcessoRestrito');
            corpoRelatorio.innerHTML = '';

            if (acessosFiltrados.length === 0) {
                exibirMensagem('Nenhum acesso encontrado para os filtros informados.', 'alerta', 'mensagemRelatorioAcessoRestrito');
                document.getElementById('relatorioAcessoRestritoContainer').style.display = 'none';
            } else {
                acessosFiltrados.forEach(acesso => {
                    const row = document.createElement('tr');
                    const funcionarioCell = document.createElement('td');
                    const areaRestritaCell = document.createElement('td');
                    const dataHoraEntradaCell = document.createElement('td');
                    const dataHoraSaidaCell = document.createElement('td');

                    funcionarioCell.textContent = acesso.nomeFuncionario;
                    areaRestritaCell.textContent = acesso.areaRestrita;
                    dataHoraEntradaCell.textContent = formatarData(acesso.dataHoraEntrada);
                    dataHoraSaidaCell.textContent = acesso.dataHoraSaida ? formatarData(acesso.dataHoraSaida) : 'N/A';

                    row.appendChild(funcionarioCell);
                    row.appendChild(areaRestritaCell);
                    row.appendChild(dataHoraEntradaCell);
                    row.appendChild(dataHoraSaidaCell);
                    corpoRelatorio.appendChild(row);
                });

                document.getElementById('mensagemRelatorioAcessoRestrito').innerHTML = '';
                document.getElementById('relatorioAcessoRestritoContainer').style.display = 'block';
            }
        });

        document.getElementById('relatorioRondasForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const filtros = obterDadosFormulario('relatorioRondasForm');

            // Simulação de geração de relatório
            console.log('Filtros do Relatório de Rondas:', filtros);

            // Dados de exemplo de rondas (substitua por dados reais)
            const rondas = [
                { funcionario: '123', nomeFuncionario: 'João', dataHoraInicio: '2023-10-25T20:00:00', dataHoraFim: '2023-10-25T21:00:00', local: 'Pátio', observacoes: 'Ronda normal.' },
                { funcionario: '456', nomeFuncionario: 'Maria', dataHoraInicio: '2023-10-25T22:00:00', dataHoraFim: '2023-10-25T23:00:00', local: 'Almoxarifado', observacoes: 'Porta trancada.' },
                { funcionario: '123', nomeFuncionario: 'João', dataHoraInicio: '2023-10-26T00:00:00', dataHoraFim: '2023-10-26T01:00:00', local: 'Escritórios', observacoes: 'Tudo ok.' },
            ];

            let rondasFiltradas = rondas.filter(ronda => {
                let filtroFuncionario = !filtros.funcionarioRondaRelatorio || ronda.funcionario === filtros.funcionarioRondaRelatorio;
                let filtroDataInicio = !filtros.dataInicioRondaRelatorio || moment(ronda.dataHoraInicio).isSameOrAfter(filtros.dataInicioRondaRelatorio, 'day');
                let filtroDataFim = !filtros.dataFimRondaRelatorio || moment(ronda.dataHoraInicio).isSameOrBefore(filtros.dataFimRondaRelatorio, 'day');
                return filtroFuncionario && filtroDataInicio && filtroDataFim;
            });

            const corpoRelatorio = document.getElementById('corpoRelatorioRondas');
            corpoRelatorio.innerHTML = '';

            if (rondasFiltradas.length === 0) {
                exibirMensagem('Nenhuma ronda encontrada para os filtros informados.', 'alerta', 'mensagemRelatorioRondas');
                document.getElementById('relatorioRondasContainer').style.display = 'none';
            } else {
                rondasFiltradas.forEach(ronda => {
                    const row = document.createElement('tr');
                    const funcionarioCell = document.createElement('td');
                    const dataHoraInicioCell = document.createElement('td');
                    const dataHoraFimCell = document.createElement('td');
                    const localCell = document.createElement('td');
                    const observacoesCell = document.createElement('td');

                    funcionarioCell.textContent = ronda.nomeFuncionario;
                    dataHoraInicioCell.textContent = formatarData(ronda.dataHoraInicio);
                    dataHoraFimCell.textContent = formatarData(ronda.dataHoraFim);
                    localCell.textContent = ronda.local;
                    observacoesCell.textContent = ronda.observacoes;

                    row.appendChild(funcionarioCell);
                    row.appendChild(dataHoraInicioCell);
                    row.appendChild(dataHoraFimCell);
                    row.appendChild(localCell);
                    row.appendChild(observacoesCell);
                    corpoRelatorio.appendChild(row);
                });

                document.getElementById('mensagemRelatorioRondas').innerHTML = '';
                document.getElementById('relatorioRondasContainer').style.display = 'block';
            }
        });

        document.getElementById('relatorioManutencaoForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const filtros = obterDadosFormulario('relatorioManutencaoForm');

            // Simulação de geração de relatório
            console.log('Filtros do Relatório de Manutenção:', filtros);

            // Dados de exemplo de manutenções (substitua por dados reais)
            const manutencoes = [
                { equipamento: 'Câmera 01', dataManutencao: '2023-10-20', descricao: 'Limpeza e ajuste.', status: 'Concluído' },
                { equipamento: 'Alarme Central', dataManutencao: '2023-10-22', descricao: 'Troca de bateria.', status: 'Pendente' },
                { equipamento: 'Câmera 01', dataManutencao: '2023-10-28', descricao: 'Teste de funcionamento', status: 'Concluído' },
            ];

            let manutencoesFiltradas = manutencoes.filter(manutencao => {
                let filtroEquipamento = !filtros.equipamentoManutencaoRelatorio || manutencao.equipamento === filtros.equipamentoManutencaoRelatorio;
                let filtroDataInicio = !filtros.dataInicioManutencaoRelatorio || moment(manutencao.dataManutencao).isSameOrAfter(filtros.dataInicioManutencaoRelatorio, 'day');
                let filtroDataFim = !filtros.dataFimManutencaoRelatorio || moment(manutencao.dataManutencao).isSameOrBefore(filtros.dataFimManutencaoRelatorio, 'day');
                return filtroEquipamento && filtroDataInicio && filtroDataFim;
            });

            const corpoRelatorio = document.getElementById('corpoRelatorioManutencao');
            corpoRelatorio.innerHTML = '';

            if (manutencoesFiltradas.length === 0) {
                exibirMensagem('Nenhuma manutenção encontrada para os filtros informados.', 'alerta', 'mensagemRelatorioManutencao');
                document.getElementById('relatorioManutencaoContainer').style.display = 'none';
            } else {
                manutencoesFiltradas.forEach(manutencao => {
                    const row = document.createElement('tr');
                    const equipamentoCell = document.createElement('td');
                    const dataManutencaoCell = document.createElement('td');
                    const descricaoCell = document.createElement('td');
                    const statusCell = document.createElement('td');

                    equipamentoCell.textContent = manutencao.equipamento;
                    dataManutencaoCell.textContent = formatarData(manutencao.dataManutencao);
                    descricaoCell.textContent = manutencao.descricao;
                    statusCell.textContent = manutencao.status;

                    row.appendChild(equipamentoCell);
                    row.appendChild(dataManutencaoCell);
                    row.appendChild(descricaoCell);
                    row.appendChild(statusCell);
                    corpoRelatorio.appendChild(row);
                });

                document.getElementById('mensagemRelatorioManutencao').innerHTML = '';
                document.getElementById('relatorioManutencaoContainer').style.display = 'block';
            }
        });

        // --- Funções de Outros ---
        document.getElementById('controleAcessoForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('controleAcessoForm');

            // Simulação de controle de acesso
            console.log('Dados de Controle de Acesso:', dados);
            exibirMensagem('Acesso registrado com sucesso!', 'sucesso', 'mensagemControleAcesso');
            this.reset();
        });

        document.getElementById('registroEntradaSaidaForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const dados = obterDadosFormulario('registroEntradaSaidaForm');

            // Simulação de registro de entrada e saída
            console.log('Dados de Registro de Entrada/Saída:', dados);
            exibirMensagem('Registro realizado com sucesso!', 'sucesso', 'mensagemRegistroEntradaSaida');
            this.reset();
        });

        // Inicializações
        atualizarSelectAreasRestritas();
        atualizarSelectFuncionarios();
        atualizarSelectEquipamentos();
    </script>
</body>

</html>